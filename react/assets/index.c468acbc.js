var x=Object.defineProperty;var f=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var y=(r,o,e)=>o in r?x(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,s=(r,o)=>{for(var e in o||(o={}))T.call(o,e)&&y(r,e,o[e]);if(f)for(var e of f(o))C.call(o,e)&&y(r,e,o[e]);return r};import{c as g,r as p,j as i,a as t,F as v,I as h,P as D,C as N,b as k,d as w,T as L,v as O,e as j,R as I,f as R,g as F}from"./vendor.2ff90933.js";const P=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function e(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerpolicy&&(a.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?a.credentials="include":l.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(l){if(l.ep)return;l.ep=!0;const a=e(l);fetch(l.href,a)}};P();const z=({dispatch:r})=>{let[o,e]=p.exports.useState(""),[n,l]=p.exports.useState("");const[a,d]=p.exports.useState("");return i("form",{id:"input-add-container",onSubmit:c=>{if(c.preventDefault(),!o.trim()){d("Please at least input a title");return}r({type:"addTodo",payload:{title:o,content:n}}),e(""),l("")},onChange:c=>{d("")},style:{backgroundColor:"#fff",boxShadow:"0 0 0.5rem 0.5rem #eee",padding:"1rem"},children:[i("label",{htmlFor:"title",children:["Title",t("sup",{children:"*"}),a&&i(v,{children:[" ",t("em",{style:{color:"red"},children:a})]})]}),t("input",{id:"title",type:"text",value:o,onChange:c=>e(c.target.value),style:{width:"100%",display:"block"}}),t("label",{htmlFor:"content",children:"Content"}),t("textarea",{id:"content",value:n,onChange:c=>l(c.target.value),style:{width:"100%",minHeight:"6em",display:"block",resize:"vertical"}}),t("div",{className:"btn-area",style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"1rem",textAlign:"center"},children:t("div",{className:"add-btn",style:{textAlign:"center"},children:t("button",{type:"submit",style:{padding:"1rem",lineHeight:"1",fontSize:"1.5rem",borderRadius:"50%"},children:t(h,{children:t(D,{style:{width:"1em",height:"1em"}})})})})})]})};var E=g()(z);const H=r=>{const{index:o,item:e,dispatch:n}=r;return i("li",{className:"todo-card",style:{listStyle:"none",width:"100%",padding:"1rem",backgroundColor:"#fff",color:"#000",boxShadow:"0 0 0.5rem 0.5rem #eee",borderRadius:"0.5rem",display:"flex",gap:"1rem",alignItems:"center"},children:[t("div",{className:"todo-check-area",style:{},children:t("a",{onClick:l=>{n({type:"updateTodo",payload:{uuid:e.uuid,completedAt:e.completedAt?"":new Date().toISOString()}})},style:{cursor:"pointer",color:e.completedAt?"#0066cc":"#ccc",fontSize:"2rem"},children:e.completedAt?t(h,{children:t(N,{})}):t(h,{children:t(k,{})})})}),i("div",{className:"todo-main-area",style:{flex:1},children:[t("div",{className:"todo-title",style:{fontWeight:"bold",fontSize:"1.25rem",textDecoration:e.completedAt?"line-through":"none",color:e.completedAt?"#aaa":"#000"},children:e.title||"No title"}),t("div",{className:"todo-content",style:{textDecoration:e.completedAt?"line-through":"none",margin:"1rem 0",color:e.completedAt?"#aaa":"#000"},children:e.content}),i("div",{className:"todo-time",style:{fontSize:"0.8rem",fontStyle:"italic",color:"#aaa"},children:[i("em",{className:"todo-time-created",children:["Created at: ",new Date(e.createdAt).toLocaleString()]}),e.completedAt&&i(v,{children:[" | ",i("em",{className:"todo-time-completed",children:["Completed at: ",new Date(e.completedAt).toLocaleString()]})]})]}),i("div",{className:"todo-actions",style:{display:"flex",width:"100%",gap:"1em",marginTop:"1rem"},children:[t("a",{children:t(h,{children:t(w,{})})}),t("a",{onClick:l=>{n({type:"removeTodo",payload:e.uuid})},style:{cursor:"pointer"},children:t(h,{color:"darkred",children:t(L,{})})})]})]})]},o)};var M=g()(H);const $=()=>{let[r,o]=p.exports.useState(u.getState()),[e,n]=p.exports.useState("all");const l=(a="all")=>{let d=u.getState();switch(a){case"active":d=d.filter(c=>!c.completedAt);break;case"completed":d=d.filter(c=>!!c.completedAt);break;default:d=d}o(d.sort((c,S)=>new Date(S.createdAt).getTime()-new Date(c.createdAt).getTime()))};return u.subscribe(()=>l(e)),i("div",{className:"todo-list-container",children:[t("div",{className:"filter-container",children:i("ul",{style:{display:"flex",gap:"1rem",listStyle:"none",padding:"0"},children:[t("li",{children:t("a",{href:"javascript:;",onClick:a=>{a.preventDefault(),n("all"),l("all")},style:{color:e==="all"?"#000":"#aaa"},children:"All"})}),t("li",{children:t("a",{href:"javascript:;",onClick:a=>{a.preventDefault(),n("active"),l("active")},style:{color:e==="active"?"#000":"#aaa"},children:"Active"})}),t("li",{children:t("a",{href:"javascript:;",onClick:a=>{a.preventDefault(),n("completed"),l("completed")},style:{color:e==="completed"?"#000":"#aaa"},children:"Completed"})})]})}),i("h2",{children:[e.charAt(0).toUpperCase()+e.slice(1)," todos"]}),r.length<1&&t("div",{className:"no-todo-container",children:i("em",{children:["Oops, no ",e!=="all"&&e," todo. Add one!"]})}),t("ul",{className:"todo-list",style:{padding:0,display:"flex",flexWrap:"wrap",gap:"1rem"},children:r.map((a,d)=>t(M,{index:d,item:a},d))}),r.length>0&&t("div",{className:"clear-todo-container",children:t("a",{href:"javascript:;",onClick:a=>{a.preventDefault(),u.dispatch({type:"clearTodos"})},children:"Delete all todos"})})]})};var B=g()($),J="/react/assets/logo.ecc203fb.svg";function U({todos:r=[]}){return i("div",{id:"app",style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[t("header",{style:{padding:"0 5%"},children:t("h1",{children:i("a",{href:"/",style:{color:"inherit",textDecoration:"none"},children:[t("img",{src:J,alt:"logo",style:{height:"1em",verticalAlign:"middle"}}),"Learn React: ToDo"]})})}),t("main",{style:{padding:"0 5% 4rem 5%",flex:1},children:i("article",{children:[t(E,{}),t(B,{})]})}),i("footer",{style:{padding:"0 5%",backgroundColor:"#eee"},children:[i("p",{children:["A simple todo app built with React.js, Redux and Vite."," ",t("a",{href:"/",children:" Back to home \u2192"})]}),i("p",{children:["\xA9 Copyright (c) ",new Date().getFullYear()," ",t("a",{href:"https://github.com/Dragon-Fish/learn-frontend",target:"_blank",rel:"noopener noreferrer",children:"Dragon-Fish"})]})]})]})}var W=g(r=>({todos:r}))(U);const _=(r,o)=>{localStorage.setItem(r,JSON.stringify(o))},q=r=>{const o=localStorage.getItem(r);return o?JSON.parse(o):null},m={set:_,get:q},K={uuid:"",title:"",content:"",createdAt:"",completedAt:""},A=r=>(r.createdAt||(r.createdAt=new Date().toISOString()),r.uuid||(r.uuid=O()),s(s({},K),r)),V=(r=[],o)=>{const e=[...r,A(o)];return m.set("todos",e),e},Y=(r=[],o)=>{const e=r.filter(n=>n.uuid!==o);return m.set("todos",e),e},G=(r=[],o)=>{const e=r.map(n=>n.uuid===o.uuid?A(s(s({},n),o)):n);return m.set("todos",e),e},Q=()=>m.get("todos")||[],X=()=>(m.set("todos",[]),[]),b={addTodo:V,removeTodo:Y,updateTodo:G,getTodos:Q,clearTodos:X},Z=(r=[],o)=>{const e=Object.keys(b).includes(o.type)?o.type:"getTodos",n=b[e],l=n(r,o.payload);return console.log("Dispatching action: ",{type:e,payload:o.payload,reducer:n,data:l}),l},u=j(Z);I.render(t(R.StrictMode,{children:t(F,{store:u,children:t(W,{})})}),document.getElementById("root"));
